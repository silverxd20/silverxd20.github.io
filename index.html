<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Precio de productos Wow</title>
    <link rel="icon" href="https://findicons.com/files/icons/679/nx10/128/world_of_warcraft.png">
    <!-- filestack Libreria -->
    <script src="https://static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <!--jquery 3-->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!--Toastr-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">

</head>

<body>
    <!-- ************** Stylos CSS *********************-->
    <style>
        body {
            background-color: #242424;
        }

        #divTablaId {
            background-color: #242424;
            opacity: 0.95;
            margin-top: -11px;

        }

        #titulo,
        #PventaLabel,
        #idiomaLabel,
        #lastUpdated,
        #servidorLabel,
        #monedaId,
        #letras,
        #lastFecha,
        h5 {
            color: bisque;
        }

        #ventanaTitulo {
            color: bisque;
            margin-left: 10px;
        }

        #idContenedor {
            margin-left: 5px;
            margin-right: 5px;
        }

        .columnas {
            border-radius: 10px;
        }

        #BtnSubirArchivo {
            visibility: hidden;
        }

        .row {
            margin-top: 10px;
            margin-bottom: 5px;
        }

        #sinProductosId {
            color: maroon;
        }

        #modalContent {
            background-color: #242424;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th,
        td {
            text-align: left;
            padding: 8px;
            color: burlywood
        }

        tr:nth-child(even) {
            background-color: rgb(51, 51, 51)
        }

        th {
            background-color: #091e4d;
            color: white;
        }

        #divProgress,
        #progressBar {
            width: 100%;
            margin-bottom: 0px;
            height: 10px;
            background-color: green;
        }

        .modal-header {
            position: sticky;
            top: 0;
            z-index: 999;
            background-color: rgb(51, 51, 51);
        }

        #divForm {
            margin-top: 10px;
            padding-left: 5px;
        }

        #PventaId {
            width: 120px;
            margin-left: 37px;
            text-align: center;
        }

        #btnCambiar {
            margin-top: 5px;
        }
    </style>

    <!-- ************************** HTML MODAL *************************** -->

    <div class="modal fade" id="staticBackdrop" id="Modal" data-bs-backdrop="static"
        data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div id="modalContent" class="modal-content">
                <div class="modal-header">
                    <img id="imgVentanita" src="" alt="">
                    <h5 class="modal-title" id="ventanaTitulo"></h5><br>
                    <h5 class="" id="precioTitulo"></h5>
                    <button id="cerrarModalId" type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
                </div>
                <div class="modal-body">

                    <!-- Todo dentro de la ventanita -->

                    <!--Definir las tabs-->
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a href="#DiaDeVentaTabHref" class="nav-link active" id="DiaDeVentaTabId" data-bs-toggle="tab"
                                data-bs-target="#home" type="button" role="tab" aria-controls="home"
                                aria-selected="true">Dias de
                                venta</a>
                        </li>
                        <li class="nav-item" role="presentation" focus>
                            <button class="nav-link" id="MapaCalienteTab" data-bs-toggle="tab"
                                data-bs-target="#profile" type="button" role="tab" aria-controls="profile"
                                aria-selected="false">Mapa
                                caliente</button>
                        </li>
                    </ul>
                    <!--contenidos de las tabs-->
                    <div class="tab-content">
                        <div class="tab-pane active" id="home" role="tabpanel" aria-labelledby="home-tab">
                            <div id="divForm" class="divForm d-flex justify-content-center">
                                <form action="">
                                    <div class="d-flex justify-content-center">
                                        <h6 id="PventaLabel" for="fname">Precio de venta:</h6><br>
                                    </div>
                                    <input type="number" class="Pventa" id="PventaId" name="fname">
                                    <b for="moneda" id="monedaId"></b>
                                    <br>
                                    <div class="d-flex justify-content-center">
                                        <input class="btn btn-success" id="btnCambiar" type="button" value="Cambiar ▼">
                                    </div>
                                </form>
                            </div>
                            <br>
                            <table id="tablaVerificacion" border="1">
                                <tr>
                                    <th>Día</th>
                                    <th>#</th>
                                    <th>Precio alcanzado</th>
                                    <th>Hora</th>
                                </tr>
                            </table>
                        </div>
                        <div class="tab-pane" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                            <iframe id="iframeId" height="550px" width="480px" src="" frameborder="0"></iframe>
                        </div>
                    </div>

                    <!-- FIN DE Todo dentro de la ventanita -->
                </div>
            </div>
        </div>
    </div>


    <!-- ************************* HTML PRINCIPAL *************************** -->
    <div id="idDivOpacity">
        <div class="d-flex justify-content-center">
            <h1 id="titulo">Protuctos en subasta (Wow TBC)</h1>
        </div>
        <div id="idContenedor">

            <div class="row align-items-center">
                <!-- Columna 1 del row* -->
                <div class="columnas col-7">
                    <b id="servidorLabel">Servidor:</b>
                    <select id="dropdownServidor">
                        <option value="Pagle-alliance">Pagle Alianza</option>
                        <option value="Whitemane-horde">Whitemane Horda</option>
                    </select>

                    <b id="idiomaLabel">Expansion:</b>
                    <select id="dropdownExpansion">
                        <option value="Todos">Todos</option>
                        <option value="Classic">Classic</option>
                        <option value="Tbc">Tbc</option>
                        <option value="Wotlk">Wotlk</option>
                    </select>

                    <b id="idiomaLabel">Categoría:</b>
                    <select id="dropdownProductos">
                    </select>
                </div>
                <!-- Columna 2 del row* -->
                <div class="columnas col-5">
                    <b id="letras" id="servidorLabel">Selecciona el proveedor de precios:</b><br>
                    <div class="form-check">
                        <input id="radioCheckNexus" class="form-check-input" type="radio" value="radioNexus"
                            name="flexRadioDisabled" id="flexRadioDisabled" checked>
                        <label id="letras" class="form-check-label" for="flexRadioDisabled">
                            Datos Online
                        </label>
                    </div>
                    <div class="form-check">
                        <input id="radioCheckArchivo" class="form-check-input" type="radio" value="radioLocalJson"
                            name="flexRadioDisabled">
                        <label id="letras" class="form-check-label" for="flexRadioCheckedDisabled">
                            Datos de escaneo Local
                        </label>
                        <button id="BtnSubirArchivo" type="button" class="btn btn-primary">Subir Archivo</button>
                    </div>
                </div>
                <p id="lastUpdated"></p>
            </div>
        </div>

        <progress id="progressBar" value="0%" max="100"></progress>
        <div id="divTablaId">
            <table id="productos" border="1">
                <tr>
                    <th>Imagen</th>
                    <th>Nombre</th>
                    <th>Precio Compra</th>
                    <th>Compra hasta el 15%</th>
                    <th>Precio de venta</th>
                    <th>Ganancia Aproximada</th>
                    <th id="porcentaje">%</th>
                    <th>Cantidad</th>
                    <th>Herramientas</th>
                </tr>
            </table>
        </div>

        <br>
        <div class="d-flex">
            <h1 id="sinProductosId"></h1>
        </div>
    </div>


    <script type="module">
        //firestore imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-firestore.js"
        import { collection, getDocs, addDoc, doc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/9.9.2/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyB4a33fFr6SgUAXjZ6FeFB_XDGL6SKuCuY",
            authDomain: "wowprices-74a82.firebaseapp.com",
            projectId: "wowprices-74a82",
            storageBucket: "wowprices-74a82.appspot.com",
            messagingSenderId: "380944707410",
            appId: "1:380944707410:web:2f229f9fbf99d96e39148b"
        };

        const app = initializeApp(firebaseConfig);
        //variables para firestore
        var infoProductosArray = []
        var infoProductosActualizadosJson = { "infoProducts": {} }
        var precioActualizado = ""
        var fechaActualizada = ""

        //variables de precios y fechas por servidores
        var precioPagle = 0
        var fechaPagle = 0
        var precioWhitemane = 0
        var fechaWhitemane = 0

        //id elementos html
        var tablaProducto = document.getElementById('productos');
        var divId = document.getElementById("divPassId")
        var cuerpoTabla = document.createElement('tbody');
        var corsBoton = document.getElementById('corsBtn');
        var sinProductosLabel = document.getElementById("sinProductosId")
        var ultimaFecha = document.getElementById("lastFecha")
        var ventanaTituloId = document.getElementById("ventanaTitulo")
        var precioTituloId = document.getElementById("precioTitulo")
        var monedaNombreId = document.getElementById("monedaId")
        var btnSubir = document.getElementById('BtnSubirArchivo');
        var selectProductos = document.createElement('dropdownProductos');
        var dropdownServidor = document.getElementById('dropdownServidor')
        var dropdownExpansion = document.getElementById("dropdownExpansion")
        var RadioArchivo = document.getElementById("radioCheckArchivo")
        var RadioNexusVar = document.getElementById("radioCheckNexus")
        var positivoNegativo = ""
        var RadioValorSelected = ""
        var server = ""

        //VARIABLES DEL LA VENTANITA
        var tablaVerificacion = document.getElementById('tablaVerificacion');
        var tbody = document.createElement('tbody');
        var campoTextPrecioVentaID = document.getElementById("PventaId")
        var campoTextoValor = document.getElementById("PventaId").value
        var precioVentaEnTablaNro = 0
        var tipoMonedaOroPlataBronce = ""
        var nombreUnico = ""
        var PrecioVenta = parseFloat(campoTextoValor) * 10000
        var diaSemana = ""
        var NombreProductoClickeado = ""
        var precioMinimo = ""
        var diaSemanaAnterior = "Sat"
        var cantidades = 0
        var MismaVentana = false
        var urlNexus = "https://nexushub.co/wow-classic/items/pagle-alliance/"
        //eventos

        //Abre el panel para agregar productos
        document.addEventListener('keydown', function (event) {
            if (event.ctrlKey && event.key === 'z') {
                window.open("dashboard/panel.html", "_blank");
            }
        });

        //click en la tab de Dias de venta
        try {
            document.getElementById("DiaDeVentaTabId").addEventListener("click", function (params) {
                if (MismaVentana == true) {
                    precioTituloId.innerText = ""
                }
            })
        } catch (error) {
        }

        //click en la tab de mapa caliente
        try {
            document.getElementById("MapaCalienteTab").addEventListener("click", function (params) {
                if (MismaVentana == false) {
                    document.getElementById("iframeId").src = urlNexus + nombreUnico
                    MismaVentana = true
                    precioTituloId.innerText = "Precio de venta: " + precioVentaEnTablaNro + " " + tipoMonedaOroPlataBronce
                } else if (MismaVentana == true) {
                    precioTituloId.innerText = "Precio de venta: " + precioVentaEnTablaNro + " " + tipoMonedaOroPlataBronce
                }
            })
        } catch (error) {
        }  

        //Click al cerrar el modal
        document.getElementById("cerrarModalId").addEventListener("click", function (params) {
            MismaVentana = false
            document.getElementById("iframeId").src = ""
            ventanaTituloId.innerText = ""
            precioTituloId.innerText = ""
        })

        //cuando cambia el dropdown select producto
        document.getElementById('dropdownProductos').addEventListener('change', function () {
            SeleccionListaProducto()
        });

        //cuando cambia el dropdown de expansion
        document.getElementById('dropdownExpansion').addEventListener('change', function () {
            SeleccionListaExpansion()
        });

        //cuando cambia el dropdown de servidor
        document.getElementById('dropdownServidor').addEventListener('change', function (event) {
            SeleccionListaServidor()
        });

        //cuando haces click en el Radio nexus
        document.getElementById('radioCheckNexus').addEventListener('click', function () {
            RadioValorSelected = RadioNexusVar.value
            CheckNexusSelected()
        });
        //cuando haces click en el Radio archivo local
        document.getElementById('radioCheckArchivo').addEventListener('click', function () {
            RadioValorSelected = RadioArchivo.value
            CheckArchivoSelected()
        });

        //cuando haces click en el boton cambiar de la ventanita
        document.getElementById('btnCambiar').addEventListener('click', function () {
            cambiarPrecioVntaBtn()
        });

        //cuando haces click en el boton subir archivo
        document.getElementById('BtnSubirArchivo').addEventListener('click', function () {
            subirArchivoJson()
        });

        //variables del html principal
        var vueltasBucle = 0

        //obtiene el valor de ambos dropdown
        var dropdownProductosValor = document.getElementById("dropdownProductos").value
        var urlNexusArray = []
        var NombreProductoArray = new Array()

        //Carga la hora del ultimo escarneo
        lastUpdated()

        //Inicia tratendo los datos y categorias del la base de datos
        leerDatos()

        tablaVerificacion.appendChild(tbody);
        tablaProducto.appendChild(cuerpoTabla);

        //LEE LOS DATOS DE FIREBASE
        async function leerDatos() {
            var RadioArchivoValor = RadioArchivo.value
            var RadioNexusValor = RadioNexusVar.value

            //Define el Valor del radio al cargar la página
            if (RadioNexusValor = "radioNexus") {
                RadioValorSelected = RadioNexusValor
            } else if (RadioArchivoValor = "radioLocalJson") {
                RadioValorSelected = RadioArchivoValor
            }

            // Inicializa Firebase si no esta inicializado
            const app = initializeApp(firebaseConfig);
            lastUpdated()
            const db = getFirestore(app);
            const colRef = collection(db, "data");
            const docsSnap = await getDocs(colRef);
            docsSnap.forEach(doc => {

                //agrega las categorias al dropdown
                for (const key in doc.data().tipo) {
                    const element = doc.data().tipo[key];
                    var daySelect = document.getElementById('dropdownProductos');
                    daySelect.options[daySelect.options.length] = new Option(element, element);
                }

                //guarda el json de los productos agregados

                const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms))

                const loop = async () => {
                    var count = 0
                    for (const key in doc.data().infoProducts) {
                        var urlNormal = doc.data().infoProducts[key].url
                        var urlProductos = obtenerUrlConServer(urlNormal, dropdownServidor.value)
                        var NombreEspañol = doc.data().infoProducts[key].traduccion
                        var categoria = doc.data().infoProducts[key].categoria
                        var expansion = doc.data().infoProducts[key].expansion
                        var nombreUnicoProduct = doc.data().infoProducts[key].nombreUnico
                        var ExpansionValue = dropdownExpansion.value

                        if (dropdownServidor.value == "Pagle-alliance") {
                            precioActualizado = doc.data().infoProducts[key].servidor.pagle.precioActualizado
                            fechaActualizada = doc.data().infoProducts[key].servidor.pagle.FechaActualizada

                        } else if (dropdownServidor.value == "Whitemane-horde") {
                            precioActualizado = doc.data().infoProducts[key].servidor.whitemane.precioActualizado
                            fechaActualizada = doc.data().infoProducts[key].servidor.whitemane.FechaActualizada

                        }

                        infoProductosArray.push(doc.data().infoProducts[key])
                        if ("Pergaminos" == categoria) {
                            //Barra de progreso
                            count = ProgressBar(count)
                            //trae los productos
                            traerProductoDatos(urlProductos, key, doc.data().infoProducts, "Español", NombreEspañol, nombreUnicoProduct, precioActualizado)
                        }
                        count = count + 1
                        await wait(75)
                    }
                }
                loop()
            })
            //console.log(infoProductosArray)
        }

        //Abre los URL de los productos trae sus datos en una tablas (Funcion principal)
        async function traerProductoDatos(urlProductos, indice, array, idioma, NombreEspañol, nombreUnicoProducto, precioActual) {

            for (let i = 0; i <= 4; i++) {
                try {
                    var corsurl = "https://api.codetabs.com/v1/proxy?quest="
                    setTimeout(function () {

                    }, 1000)
                    //abre el url
                    const respuesta = await fetch(urlProductos)
                    console.log('Status code: ', respuesta.status);
                    const json = await respuesta.json()
                    //Variable del producto
                    var productName = json.name
                    var uniqueName = json.uniqueName
                    var imagen = json.icon
                    //Si el radio es de nexus deja el precio online
                    if (RadioValorSelected == "radioNexus") {
                        var precioMinimo = json.stats.current.minBuyout / 10000

                    } else if (RadioValorSelected == "radioLocalJson") {
                        //Si el radio es del archivo deja ese precio
                        var precioMinimo = precioActual / 10000
                    }
                    var precioPromedio = await json.stats.current.marketValue / 10000
                    var gananciaEstimada = gananciaPromedia(precioMinimo, precioPromedio).toFixed(4)
                    var porcentajeGanancia = gananciaEstimada / precioMinimo * 100
                    var cantidades = await json.stats.current.quantity

                    //Verifica si el idioma es español
                    if (idioma == "Español") {
                        productName = NombreEspañol
                    }

                    //agrega los datos a a tabla
                    var fila = document.createElement('tr');

                    //la imagen del producto
                    var div_caption = document.createElement('div');
                    var img = document.createElement('img');
                    img.src = imagen;
                    fila.appendChild(div_caption);
                    fila.appendChild(img);

                    //crea el nombre
                    var td = document.createElement('td');
                    td.innerText = productName
                    td.setAttribute("style", "font-weight:bold");
                    fila.appendChild(td);

                    //crea el precio minimo
                    td = document.createElement('td');
                    td.setAttribute("style", "font-weight:bold");
                    td.innerText = PlataOro(precioMinimo);
                    fila.appendChild(td);

                    //crea el compra hasta el 15%
                    td = document.createElement('td');
                    var compraMaxima = CompraMaxima(precioPromedio, porcentajeGanancia)
                    if (compraMaxima == "-") {
                        td.innerText = compraMaxima;
                    } else {
                        td.innerText = PlataOro(compraMaxima);
                    }
                    td.setAttribute("style", "font-weight:bold");
                    fila.appendChild(td);

                    //crea el precio promedio
                    td = document.createElement('td');
                    td.innerText = PlataOro(precioPromedio);
                    td.setAttribute("style", "font-weight:bold");
                    fila.appendChild(td);

                    //crea la ganancia estimada
                    td = document.createElement('td');
                    td.innerText = PlataOro(gananciaEstimada);
                    //agrega color verde si es positivo y rojo si es negativo
                    if (positivoNegativo == true) {
                        td.setAttribute("style", "color:#00af1d");
                    } else {
                        td.setAttribute("style", "color:red");
                    }
                    fila.appendChild(td);

                    //crea el % de ganancia
                    td = document.createElement('tr');
                    td = document.createElement('td');
                    if (positivoNegativo == true) {

                        if (porcentajeGanancia.toFixed(2) < 20 && porcentajeGanancia.toFixed(2) > 0) {

                            td.setAttribute("style", "color:#dfdb00");
                        } else if (porcentajeGanancia.toFixed(2) > 20) {
                            //color verde si es mayor a 20%
                            td.setAttribute("style", "color:#00af1d");
                        }
                    } else {
                        td.setAttribute("style", "color:red");
                    }
                    td.innerText = porcentajeGanancia.toFixed(2) + " %"
                    fila.appendChild(td);

                    //crea las cantidades publicadas
                    td = document.createElement('tr');
                    td = document.createElement("td");
                    td.innerText = cantidades
                    fila.appendChild(td);

                    //crea el boton de la heramienta de venta
                    td = document.createElement('tr');
                    td = document.createElement("td");
                    NombreProductoArray.push(productName)
                    td.innerText = "Abrir";
                    td.setAttribute("data-bs-toggle", "modal")
                    td.setAttribute("data-bs-target", "#staticBackdrop")
                    td.setAttribute("style", "cursor: pointer")
                    td.onclick = function (evt) {
                        //agarra el texto de la tabla y lo coloca en la ventana segun el producto
                        campoTextPrecioVentaID = document.getElementById("PventaId")
                        //pone el nombre del producto en el titulo de la ventanita
                        NombreProductoClickeado = evt.path[1].childNodes[2].innerHTML
                        ventanaTituloId.innerText = NombreProductoClickeado
                        //pone la imagen del producto en el titulo de la ventanita
                        var imagenProductoClickado = evt.path[1].childNodes[1].currentSrc
                        document.getElementById("imgVentanita").src = imagenProductoClickado

                        //obtiene el valor del precio de venta sugerido en la tabla
                        var precioVentaEnTablaTexto = evt.path[1].childNodes[5].innerHTML
                        precioVentaEnTablaNro = evt.path[1].childNodes[5].innerHTML.split(" ")[0]
                        tipoMonedaOroPlataBronce = evt.path[1].childNodes[5].innerHTML.split(" ")[1]
                        //pone el precio obtenido de la tabla "precio venta" en el campo de texto
                        campoTextPrecioVentaID.value = precioVentaEnTablaNro

                        //Pone al lado de campo de texto el tipo de moneda
                        monedaNombreId.innerText = tipoMonedaOroPlataBronce

                        //Nombre del producto con guion ejemp: scroll-of-agility-iv
                        nombreUnico = nombreUnicoProducto

                        //Al abrir pone la tab en la primera
                        $('a[href="#DiaDeVentaTabHref"]').tab('show');

                        //inicia la consulta
                        SolicitarDatos(precioVentaEnTablaNro, tipoMonedaOroPlataBronce, nombreUnico)

                    }
                    fila.appendChild(td);

                    //doble click en la fila
                    fila.ondblclick = function (evt) {

                        copiarNombreProducto(NombreEspañol)
                    }

                    cuerpoTabla.appendChild(fila);
                    vueltasBucle = 0

                    // filtra la tabla por mayor %% cada vez q se agregan a la tabla
                    sortTable()

                    break
                } catch (error) {
                    console.log(error)
                    console.log(urlProductos)
                    setTimeout(function () {
                        console.log("vuelta: " + i)
                    }, 1000)
                }
            }
        }

        //Filtra la lista por la expansion del juego
        function SeleccionListaExpansion() {
            var dropdownProductosValue = document.getElementById("dropdownProductos").value
            var dropdownExpansionValue = dropdownExpansion.value
            var dropdownServidorValue = dropdownServidor.value

            //Carga la hora del ultimo escarneo
            lastUpdated()
            LimpiarTabla()

            const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms))

            const loop = async () => {
                var count = 0
                for (const key in infoProductosArray) {

                    var urlNormal = infoProductosArray[key].url
                    var urlProductos = obtenerUrlConServer(urlNormal, dropdownServidor.value)
                    var NombreEspañol = infoProductosArray[key].traduccion
                    var categoria = infoProductosArray[key].categoria
                    var expansion = infoProductosArray[key].expansion
                    var nombreUnicoProducto = infoProductosArray[key].nombreUnico
                    sinProductosLabel.innerText = ""

                    if (dropdownServidor.value == "Pagle-alliance") {
                        precioActualizado = infoProductosArray[key].servidor.pagle.precioActualizado
                        fechaActualizada = infoProductosArray[key].servidor.pagle.FechaActualizada

                    } else if (dropdownServidor.value == "Whitemane-horde") {
                        precioActualizado = infoProductosArray[key].servidor.whitemane.precioActualizado
                        fechaActualizada = infoProductosArray[key].servidor.whitemane.FechaActualizada
                    }

                    if (dropdownProductosValue == infoProductosArray[key].categoria && dropdownExpansionValue == infoProductosArray[key].expansion) {
                        count = ProgressBar(count)
                        traerProductoDatos(urlProductos, key, infoProductosArray, "Español", NombreEspañol, nombreUnicoProducto, precioActualizado)
                    } else if (dropdownProductosValue == infoProductosArray[key].categoria && dropdownExpansionValue == "Todos") {
                        count = ProgressBar(count)
                        traerProductoDatos(urlProductos, key, infoProductosArray, "Español", NombreEspañol, nombreUnicoProducto, precioActualizado)
                    }
                    var count = count + 1
                    await wait(75)
                }
            }
            loop()
        }

        //Filtra la lista por el servidor elejido
        function SeleccionListaServidor() {
            var dropdownProductosValue = document.getElementById("dropdownProductos").value
            var dropdownExpansionValue = dropdownExpansion.value
            var dropdownServidorValue = dropdownServidor.value

            LimpiarTabla()

            const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms))

            const loop = async () => {
                var count = 0
                for (const key in infoProductosArray) {

                    var urlNormal = infoProductosArray[key].url
                    var urlProductos = obtenerUrlConServer(urlNormal, dropdownServidor.value)
                    var NombreEspañol = infoProductosArray[key].traduccion
                    var categoria = infoProductosArray[key].categoria
                    var expansion = infoProductosArray[key].expansion
                    var nombreUnicoProducto = infoProductosArray[key].nombreUnico
                    sinProductosLabel.innerText = ""

                    if (dropdownServidorValue == "Pagle-alliance") {
                        precioActualizado = infoProductosArray[key].servidor.pagle.precioActualizado
                        fechaActualizada = infoProductosArray[key].servidor.pagle.FechaActualizada

                    } else if (dropdownServidorValue == "Whitemane-horde") {
                        precioActualizado = infoProductosArray[key].servidor.whitemane.precioActualizado
                        fechaActualizada = infoProductosArray[key].servidor.whitemane.FechaActualizada
                    }

                    if (dropdownProductosValue == infoProductosArray[key].categoria && dropdownExpansionValue == infoProductosArray[key].expansion) {
                        count = ProgressBar(count)
                        traerProductoDatos(urlProductos, key, infoProductosArray, "Español", NombreEspañol, nombreUnicoProducto, precioActualizado)
                    } else if (dropdownProductosValue == infoProductosArray[key].categoria && dropdownExpansionValue == "Todos") {
                        count = ProgressBar(count)
                        traerProductoDatos(urlProductos, key, infoProductosArray, "Español", NombreEspañol, nombreUnicoProducto, precioActualizado)
                    }
                    var count = count + 1
                    await wait(75)
                }
            }
            loop()
            //Carga la hora del ultimo escarneo
            lastUpdated()
        }

        //Seleccion del dropdown de productos
        function SeleccionListaProducto() {
            var dropdownProductosValue = document.getElementById("dropdownProductos").value
            var dropdownExpansionValue = dropdownExpansion.value
            var dropdownServidorValue = dropdownServidor.value
            LimpiarTabla()

            const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms))

            const loop = async () => {
                var count = 0
                for (const key in infoProductosArray) {

                    var urlNormal = infoProductosArray[key].url
                    var urlProductos = obtenerUrlConServer(urlNormal, dropdownServidorValue)
                    var NombreEspañol = infoProductosArray[key].traduccion
                    var categoria = infoProductosArray[key].categoria
                    var expansion = infoProductosArray[key].expansion
                    var nombreUnicoProducto = infoProductosArray[key].nombreUnico
                    sinProductosLabel.innerText = ""

                    if (dropdownServidor.value == "Pagle-alliance") {
                        precioActualizado = infoProductosArray[key].servidor.pagle.precioActualizado
                        fechaActualizada = infoProductosArray[key].servidor.pagle.FechaActualizada

                    } else if (dropdownServidor.value == "Whitemane-horde") {
                        precioActualizado = infoProductosArray[key].servidor.whitemane.precioActualizado
                        fechaActualizada = infoProductosArray[key].servidor.whitemane.FechaActualizada
                    }

                    if (dropdownProductosValue == infoProductosArray[key].categoria && dropdownExpansionValue == infoProductosArray[key].expansion) {
                        count = ProgressBar(count)
                        traerProductoDatos(urlProductos, key, infoProductosArray, "Español", NombreEspañol, nombreUnicoProducto, precioActualizado)

                    } else if (dropdownProductosValue == infoProductosArray[key].categoria && dropdownExpansionValue == "Todos") {
                        count = ProgressBar(count)
                        traerProductoDatos(urlProductos, key, infoProductosArray, "Español", NombreEspañol, nombreUnicoProducto, precioActualizado)
                    }
                    //Carga la hora del ultimo escarneo
                    lastUpdated()
                    var count = count + 1
                    await wait(75)
                }
            }
            loop()
        }

        //Barra de progreso de la carga
        function ProgressBar(countValue) {
            var value1 = countValue
            var value2 = countValue + 1
            var table_content = '<table><tr>'
                + '<td style= "font-size: 10px;" >' + value1 + '</td>'
                + '<td style= "font-size: 10px;" >' + value2 + '</td>'
                + '<td style= "font-size: 10px;" >'
                + '</div>'
                + '</div>'
                + '</tr></table>';
            document.querySelector('#progressBar').value = (countValue + 1)
            return countValue
        }


        async function leerJsonSubido(url) {
            const db = getFirestore(app);
            const Ref = doc(db, "data", "datos");


            for (let indice = 0; indice < 5; indice++) {

                var dropdownProductosValue = document.getElementById("dropdownProductos").value
                var dropdownExpansionValue = dropdownExpansion.value
                var dropdownServidorValue = dropdownServidor.value

                //Inicia trayendo los datos del json subido a Filestacks
                const respuesta = await fetch(url)
                const respuestaArchivoJson = await respuesta.json()
                console.log("Archivo escaneado (2/4)")
                var fechaUltimoScan = respuestaArchivoJson.FechaUltimoScan //Fecha ultimo escaneo
                server = respuestaArchivoJson.servidor.toString().toLowerCase()
                console.log("servidor: " + server)

                //Recorre todos los productos del archivo json
                for (const key in respuestaArchivoJson.Productos) {

                    var nombreNormalJson = respuestaArchivoJson.Productos[key].nombre //Nombre
                    var nombreSinAcentoMinusculasJson = nombreNormalJson.toLocaleLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "")

                    for (let index = 0; index < infoProductosArray.length; index++) {

                        var NombreEspañolBaseDatosMinuscula = infoProductosArray[index].traduccion.toLocaleLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "")

                        //Si el nombre existe en nuestra BD entonces guarda solo ese producto en un nuevo objeto json
                        if (NombreEspañolBaseDatosMinuscula == nombreSinAcentoMinusculasJson) {
                            var urlNormal = infoProductosArray[index].url
                            var urlProductos = obtenerUrlConServer(urlNormal, dropdownServidorValue)
                            var NombreEspañol = infoProductosArray[index].traduccion
                            var categoria = infoProductosArray[index].categoria
                            var expansion = infoProductosArray[index].expansion
                            var nombreUnicoProducto = infoProductosArray[index].nombreUnico
                            var precioActualizado = respuestaArchivoJson.Productos[key].Precio //Precio

                            //si es pagle o whitemane pone un precio u otro
                            if (server == "pagle") {

                                precioPagle = respuestaArchivoJson.Productos[key].Precio
                                fechaPagle = respuestaArchivoJson.FechaUltimoScan

                                precioWhitemane = infoProductosArray[index].servidor.whitemane.precioActualizado
                                fechaWhitemane = infoProductosArray[index].servidor.whitemane.FechaActualizada

                            } else if (server == "whitemane") {

                                precioWhitemane = respuestaArchivoJson.Productos[key].Precio
                                fechaWhitemane = respuestaArchivoJson.FechaUltimoScan

                                precioPagle = infoProductosArray[index].servidor.pagle.precioActualizado
                                fechaPagle = infoProductosArray[index].servidor.pagle.FechaActualizada

                            }

                            infoProductosActualizadosJson.infoProducts[nombreUnicoProducto] = {
                                "url": urlProductos,
                                "traduccion": nombreNormalJson,
                                "categoria": categoria,
                                "nombreUnico": nombreUnicoProducto,
                                "expansion": expansion,
                                "servidor": {
                                    "pagle": {
                                        "precioActualizado": precioPagle,
                                        "FechaActualizada": fechaPagle
                                    },
                                    "whitemane": {
                                        "precioActualizado": precioWhitemane,
                                        "FechaActualizada": fechaWhitemane
                                    }
                                }
                            };
                        }
                    }
                }

                console.log(infoProductosActualizadosJson)
                console.log("Nuevo array creado (3/4)")

                //Ahora lo subimos a firestore

                await setDoc(doc(db, "data", "datos"), infoProductosActualizadosJson).then(resp => {

                    alert("Agregado correctamente!")
                    console.log("Se han guardado los datos")
                    window.location.reload(true);
                }).catch(function (reason) {
                    console.log(reason)
                });
                break
            }

        }


        //funcion cuando se selecciona el radio de nexus
        function CheckNexusSelected() {
            RadioValorSelected = RadioNexusVar.value
            btnSubir.style.visibility = "hidden";
            SeleccionListaServidor()
        }

        //funcion cuando se selecciona el radio de nexus
        function CheckArchivoSelected() {
            var RadioArchivoValor = RadioArchivo.value
            btnSubir.style.visibility = "visible";
            SeleccionListaServidor()
            //leerJsonSubido()
        }

        //Funcion que sube el archivo a Filestack y obtiene su URL
        function subirArchivoJson() {
            var urlJsonSubido = ""

            const client = filestack.init("AQacciKSRQgKSUJl2BTpFz");
            const options = {
                uploadConfig: {
                    retry: 5,
                    timeout: 65000,
                },
                onFileUploadFinished: file => {
                    //Cuando termina de subir el archivo se obtiene la respuesta aquí
                    urlJsonSubido = file.url
                    leerJsonSubido(urlJsonSubido)
                    console.log("El archivo se ah subido! (1/4)")
                    console.log("Url: " + urlJsonSubido)
                }
            };
            //Abre el subidor de archivos
            var oro = client.picker(options).open()
        }

        //pone los numero en 0 como plata si no lo deja en oro
        function PlataOro(nro) {

            var PrecioFloat = nro
            if (PrecioFloat > 1) {
                //si es positivo y es oro
                var precioMinimo = parseFloat(PrecioFloat).toFixed(2) + " Oro"
                positivoNegativo = true

            } else if (PrecioFloat > 0.01) {
                //si es positivo y es plata
                var precioMinimo = parseFloat(PrecioFloat).toFixed(4) * 100 + " Plata"
                if (precioMinimo == 1) {
                    precioMinimo = PrecioFloat + " Oro"
                }
                positivoNegativo = true

            } else if (PrecioFloat > 0.001) {
                //si es positivo y es cobre
                var precioMinimo = PrecioFloat * 10000 + " Cobre"
                positivoNegativo = true
            } else {
                //aqui esto es negativo
                precioMinimo = PrecioFloat * 100
                positivoNegativo = false

                if (precioMinimo < -100) {
                    //si esto es negativo y pasa de -100
                    var precioMinimo = parseFloat(precioMinimo / 100).toFixed(2) + " Oro"

                } else {
                    //si esto es negativo y es menor a -100
                    var precioMinimo = PrecioFloat * 100 + " Plata"
                }
            }
            return precioMinimo;
        }

        //Dice la ganancia si se publica al precio promedio
        function gananciaPromedia(preMinimo, prePromedio) {
            var calculoDelCincoPorcieto = prePromedio * 5 / 100
            var SaldoMenosCincoPorciento = prePromedio - calculoDelCincoPorcieto
            var gananciaEstimada = SaldoMenosCincoPorciento - preMinimo
            return gananciaEstimada;
        }

        //Limpia la tabla
        function LimpiarTabla() {
            var tableHeaderRowCount = 1;
            var table = document.getElementById('productos');
            var rowCount = table.rows.length;
            for (var i = tableHeaderRowCount; i < rowCount; i++) {
                table.deleteRow(tableHeaderRowCount);
            }
        }

        //traduce el mes a español
        function mesEnEspañol(mesIngles) {
            var mesEspañol = ""

            if (mesIngles == "Jan") {
                mesEspañol = "Enero"
            } else if (mesIngles == "Feb") {
                mesEspañol = "Febrero"
            } else if (mesIngles == "Mar") {
                mesEspañol = "Marzo"
            } else if (mesIngles == "Apr") {
                mesEspañol = "Abril"
            } else if (mesIngles == "May") {
                mesEspañol = "Mayo"
            } else if (mesIngles == "Jun") {
                mesEspañol = "Junio"
            } else if (mesIngles == "Jul") {
                mesEspañol = "Julio"
            } else if (mesIngles == "Aug") {
                mesEspañol = "Agosto"
            } else if (mesIngles == "Sep") {
                mesEspañol = "Septiembre"
            } else if (mesIngles == "Oct") {
                mesEspañol = "Octubre"
            } else if (mesIngles == "Nov") {
                mesEspañol = "Noviembre"
            } else if (mesIngles == "Dec") {
                mesEspañol = "Diciembre"
            }
            return mesEspañol
        }

        //Fecha de la ultima actualización
        function lastUpdated() {
            for (let count = 0; count < 5; count++) {

                try {
                    //Si el proveeedor es del archivo pone la fecha del archivo
                    if (RadioValorSelected == "radioLocalJson") {

                        const d = new Date(fechaActualizada * 1000);
                        var Dia = d.toString().split(" ")[2]
                        var Mes = mesEnEspañol(d.toString().split(" ")[1])
                        var Año = d.toString().split(" ")[3]
                        var fechaCompleta = "Fecha: " + Dia + " de " + Mes + " del " + Año

                        var hora = hora24a12(d.getHours())
                        var minuto = minutosConCero(d.getMinutes())
                        var ultimoScanHora = "Último escaneo: " + hora[0] + ":" + minuto + " " + hora[1]

                        var escaneo = document.getElementById("lastUpdated").innerHTML = ultimoScanHora + " - " + fechaCompleta;

                    } else if (RadioValorSelected == "radioNexus") {

                        //si el proveedor es de nexus entonces usa esa fecha
                        var corsurl = "https://api.codetabs.com/v1/proxy?quest="
                        var resultDate = fetch("https://api.nexushub.co/wow-classic/v1/items/pagle-alliance/scroll-of-agility-iv")
                            .then(resultDate => resultDate.json())
                            .then(function (fecha) {
                                const d = new Date(fecha.stats.lastUpdated);
                                var Dia = d.toString().split(" ")[2]
                                var Mes = mesEnEspañol(d.toString().split(" ")[1])
                                var Año = d.toString().split(" ")[3]
                                var fechaCompleta = "Fecha: " + Dia + " de " + Mes + " del " + Año

                                var hora = hora24a12(d.getHours())
                                var minuto = minutosConCero(d.getMinutes())
                                var ultimoScanHora = "Último escaneo: " + hora[0] + ":" + minuto + " " + hora[1]
                                var escaneo = document.getElementById("lastUpdated").innerHTML = ultimoScanHora + " - " + fechaCompleta;
                            })
                    }
                    break
                } catch (error) {
                    if (count == 5) {
                        break
                    }
                    console.log(error)
                    sleep(1000)
                }
            }
        }

        function minutosConCero(min) {
            var minuto = ""
            if (min == 1) {
                minuto = "0"
            } else if (min == 2) {
                minuto = "02"
            } else if (min == 3) {
                minuto = "03"
            } else if (min == 2) {
                minuto = "04"
            } else if (min == 4) {
                minuto = "05"
            } else if (min == 5) {
                minuto = "05"
            } else if (min == 6) {
                minuto = "06"
            } else if (min == 7) {
                minuto = "07"
            } else if (min == 8) {
                minuto = "08"
            } else if (min == 9) {
                minuto = "09"
            } else if (min == 0) {
                minuto = "00"
            } else {
                minuto = min
            }
            return minuto
        }
        //sugiere comprar hasta el 15% si la ganancia es mayor al 20%
        function CompraMaxima(prePromedio, porcentajeGanancia) {

            var porcentajeEsperado = 20
            if (porcentajeGanancia >= porcentajeEsperado) {

                var calculoDelCincoPorcieto1 = prePromedio * 5 / 100
                var SaldoPromedioMenosCincoPorciento = prePromedio - calculoDelCincoPorcieto1
                //
                var saldoCompraHasta15 = SaldoPromedioMenosCincoPorciento * 0.85
            } else {
                var saldoCompraHasta15 = "-"
            }

            return saldoCompraHasta15

        }

        //sleep
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        //Cambia el horario 24 horas a 12 horas.
        function hora24a12(hora) {
            if (hora == 12) {
                hora = [12, "pm"]
            } else if (hora == 13) {
                hora = [1, "pm"]
            } else if (hora == 14) {
                hora = [2, "pm"]
            } else if (hora == 15) {
                hora = [3, "pm"]
            } else if (hora == 16) {
                hora = [4, "pm"]
            } else if (hora == 17) {
                hora = [5, "pm"]
            } else if (hora == 18) {
                hora = [6, "pm"]
            } else if (hora == 19) {
                hora = [7, "pm"]
            } else if (hora == 20) {
                hora = [8, "pm"]
            } else if (hora == 21) {
                hora = [9, "pm"]
            } else if (hora == 22) {
                hora = [10, "pm"]
            } else if (hora == 23) {
                hora = [11, "pm"]
            } else if (hora == 24) {
                hora = [12, "am"]
            } else if (hora == 0) {
                hora = [12, "am"]
            } else {
                hora = [hora, "am"]
            }
            return hora;
        }

        //ordena la tabla de mayor a menor
        function compareValues(a, b) {
            // return -1/0/1 based on what you "know" a and b
            // are here. Numbers, text, some custom case-insensitive
            // and natural number ordering, etc. That's up to you.
            // A typical "do whatever JS would do" is:
            a = parseFloat(a.split(" ")[0])
            b = parseFloat(b.split(" ")[0])
            return (a > b) ? -1 : (a < b) ? 1 : 0;
        }

        function sortTable() {
            var tbody = tablaProducto.querySelector(`tbody`);
            var rows = Array.from(tablaProducto.querySelectorAll(`tr`));
            // but ignore the heading row:
            rows = rows.slice(1);
            var posicion = 8
            // set up the queryselector for getting the indicated
            // column from a row, so we can compare using its value:
            var qs = `td:nth-child(${posicion})`;
            // and then just... sort the rows:
            rows.sort((r1, r2) => {
                // get each row's relevant column
                var t2 = r2.querySelector(qs);
                var t1 = r1.querySelector(qs);
                // and then effect sorting by comparing their content:
                return compareValues(t1.textContent, t2.textContent);
            });

            // and then the magic part that makes the sorting appear on-page:
            rows.forEach(row => tbody.appendChild(row));
        }

        //******************************* JS DE LA VENTANA **********************************

        //funcion que solicita los datos del url
        async function SolicitarDatos(precioVentaEnTablaNro, tipoMonedaOroPlataBronce, uniqueName) {

            if (tipoMonedaOroPlataBronce == "Oro") {
                precioVentaEnTablaNro = precioVentaEnTablaNro * 10000
                console.log("Es oro: " + precioVentaEnTablaNro)
            } else if (tipoMonedaOroPlataBronce == "Plata") {
                precioVentaEnTablaNro = precioVentaEnTablaNro * 100
                console.log("Es plata: " + precioVentaEnTablaNro)

            } else if (tipoMonedaOroPlataBronce == "Cobre") {
                precioVentaEnTablaNro = precioVentaEnTablaNro * 10
                console.log("Es plata: " + precioVentaEnTablaNro)
            }

            LimpiarTablaVerificacion()

            var corsurl = "https://api.codetabs.com/v1/proxy?quest="
            var Url = "https://api.nexushub.co/wow-classic/v1/items/pagle-alliance/" + uniqueName + "/prices"
            const respuesta = await fetch(corsurl + Url)
            const jsonResultado = await respuesta.json()
            for (var index = 0; index < jsonResultado.data.length; index++) {

                const d = new Date(jsonResultado.data[index].scannedAt);
                var hora = hora24a12(d.getHours())
                var minuto = minutosConCero(d.getMinutes())
                var horaMinutos = hora[0] + ":" + minuto + " " + hora[1]
                var diaSemana = d.toString().split(" ")[0]
                var precioCompra = jsonResultado.data[index].minBuyout

                if (precioCompra > precioVentaEnTablaNro) {
                    //verifica si el dia de la semana es el mismo o ha cambiado
                    if (diaSemana == diaSemanaAnterior) {
                        //en caso que sea el mismo dia
                        cantidades = cantidades + 1
                        diaSemanaAnterior = diaSemana
                        precioCompra = PlataOro(precioCompra / 10000)
                        crearColumna(diaSemana, cantidades, precioCompra, horaMinutos)

                    } else {
                        //cuando cambia a otro dia de la semana
                        cantidades = 1
                        diaSemanaAnterior = diaSemana
                        precioCompra = PlataOro(precioCompra / 10000)
                        crearColumna(diaSemana, cantidades, precioCompra, horaMinutos)
                    }
                }
            }

        }

        //funcion que crea las columnas de la tabla
        function crearColumna(diaSemana, cantidades, precioCompra, Hora) {

            //crea un TR
            var fila = document.createElement('tr');

            //agrega la columna Día
            var td = document.createElement('td');
            td.innerText = TraducirDiaSemana(diaSemana)
            td.setAttribute("style", "font-weight:bold");
            fila.appendChild(td);

            //agrega la columna #
            td = document.createElement('td');
            td.innerText = cantidades
            td.setAttribute("style", "font-weight:bold");
            fila.appendChild(td);
            tbody.appendChild(fila);

            //agrega la columna Precio Compra
            td = document.createElement('td');
            td.innerText = precioCompra
            td.setAttribute("style", "font-weight:bold");
            fila.appendChild(td);
            tbody.appendChild(fila);

            //agrega la columna Hora
            td = document.createElement('td');
            td.innerText = Hora
            td.setAttribute("style", "font-weight:bold");
            fila.appendChild(td);
            tbody.appendChild(fila);
        }

        //el Boton para hacer una nueva verificacion con otro precio de venta
        function cambiarPrecioVntaBtn() {
            campoTextPrecioVentaID = document.getElementById("PventaId")
            campoTextPrecioVentaID = campoTextPrecioVentaID.value
            SolicitarDatos(campoTextPrecioVentaID, tipoMonedaOroPlataBronce, nombreUnico)
        }

        //Limpia la tabla
        function LimpiarTablaVerificacion() {
            var tableHeaderRowCount = 1;
            var table = document.getElementById('tablaVerificacion');
            var rowCount = table.rows.length;
            for (var i = tableHeaderRowCount; i < rowCount; i++) {
                table.deleteRow(tableHeaderRowCount);
            }
        }

        //obtiene el url con el server seleccionado del dropdown
        function obtenerUrlConServer(urlNormal, serverSelected) {
            var urlSplit = urlNormal.split("/")
            var serverFaccionSplit = urlSplit[6].toString().split("-")
            var urlProductosConServerSelect = urlSplit[0] + "//" + urlSplit[2] + "/" + urlSplit[3] + "/" + urlSplit[4] + "/" + urlSplit[5] + "/" + serverSelected + "/" + urlSplit[7]
            return urlProductosConServerSelect
        }

        //traduccion de dia de la semana
        function TraducirDiaSemana(diaSemana) {
            if (diaSemana == "Mon") {
                diaSemana = "Lunes"
            } else if (diaSemana == "Tue") {
                diaSemana = "Martes"
            } else if (diaSemana == "Wed") {
                diaSemana = "Miercoles"
            } else if (diaSemana == "Thu") {
                diaSemana = "Jueves"
            } else if (diaSemana == "Fri") {
                diaSemana = "Viernes"
            } else if (diaSemana == "Sat") {
                diaSemana = "Sabado"
            } else if (diaSemana == "Sun") {
                diaSemana = "Domingo"
            }

            return diaSemana;
        }

        //copia el nombre del producto al que se le da doble click
        function copiarNombreProducto(NombreEspañol) {
            // Copia el nombre del producto
            navigator.clipboard.writeText(NombreEspañol);
            toastr.options = {
                "closeButton": false,
                "debug": false,
                "newestOnTop": false,
                "progressBar": false,
                "positionClass": "toast-top-right",
                "preventDuplicates": true,
                "onclick": null,
                "showDuration": "300",
                "hideDuration": "200",
                "timeOut": "3000",
                "extendedTimeOut": "500",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }
            toastr.success(NombreEspañol, "Nombre copiado: ")
        }

    </script>
</body>

</html>